<form method="POST" action="{{ url_for('index') }}">
  <div class="mb-3">
    <label for="patient_id" class="form-label">Select Patient</label>
    <select class="form-select" name="patient_id" required>
      {% for pid in patient_ids %}
        <option value="{{ pid }}" {% if selected_patient and pid == selected_patient %}selected{% endif %}>{{ pid }}</option>
      {% endfor %}
    </select>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>

{% if has_patient %}
  <hr>
  <h4>Predicted Visual Aura: {{ prediction }}</h4>
  <p>Probability: {{ probability|round(3) }}</p>

  <h5>Patient Data</h5>
  <div style="overflow-x:auto;">
    {{ patient_row.to_html(classes="table table-striped table-sm")|safe }}
  </div>
{% else %}
  <p class="text-muted mt-3">No patient selected.</p>
{% endif %}